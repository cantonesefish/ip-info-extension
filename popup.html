<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IP Info</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="bg-shape shape-1"></div>
  <div class="bg-shape shape-2"></div>

  <div class="container">
    
    <!-- Token Modal -->
    <div id="token-modal" class="modal">
      <div class="modal-content">
        <h3 data-i18n="modal_title">Set API Token</h3>
        <p data-i18n="modal_desc">Enter your ipinfo.io Token</p>
        <input type="text" id="token-input" placeholder="Token...">
        <div class="modal-actions">
          <button id="cancel-token-btn" data-i18n="btn_cancel">Cancel</button>
          <button id="save-token-btn" class="primary" data-i18n="btn_save">Save</button>
        </div>
      </div>
    </div>

    <!-- Error Toast -->
    <div id="error-toast" class="toast"></div>

    <div class="main-content">
      
      <!-- 左侧区域 -->
      <div class="left-column">
        
        <!-- 1. 左上：网站 IP -->
        <div class="glass-panel left-top-panel">
          <h3 data-i18n="lbl_current_site">Current Site</h3>
          <div id="site-ip-info" class="ip-info-container">
            <div class="loading-pulse"></div>
          </div>
        </div>

        <!-- 2. 左中：协议信息 -->
        <div class="glass-panel left-mid-panel">
          <div class="protocol-container">
            <span class="protocol-label" data-i18n="lbl_protocol">Protocol</span>
            <span id="site-protocol" class="protocol-value">...</span>
          </div>
        </div>

        <!-- 3. 左下：控制按钮 -->
        <div class="glass-panel left-bottom-panel">
          <div class="control-grid">
            <div class="control-card" id="btn-theme" title="Mode">
              <svg viewBox="0 0 24 24" class="icon" id="icon-theme"><path d=""/></svg>
              <span data-i18n="btn_mode">Mode</span>
            </div>
            <div class="control-card" id="btn-token" title="Token">
              <svg viewBox="0 0 24 24" class="icon"><path d="M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>
              <span data-i18n="btn_token">Token</span>
            </div>
            <div class="control-card" id="btn-refresh" title="Refresh">
              <svg viewBox="0 0 24 24" class="icon"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
              <span data-i18n="btn_refresh">Refresh</span>
            </div>
            <div class="control-card" id="btn-github" title="GitHub">
              <svg viewBox="0 0 24 24" class="icon"><path d="M12 2C6.48 2 2 6.48 2 12c0 4.42 2.87 8.17 7.09 9.57.5.09.68-.22.68-.48 0-.24-.01-1.05-.01-1.91-2.49.46-3.09-1.2-3.09-1.2-.45-1.15-1.11-1.46-1.11-1.46-.81-.55.06-.54.06-.54.9.06 1.37.92 1.37.92 1.01 1.73 2.65 1.23 3.3.94.1-.73.4-1.23.72-1.52-2.2-.25-4.51-1.1-4.51-4.9 0-1.08.38-1.97 1.01-2.66-.1-.25-.44-1.26.1-2.62 0 0 .83-.26 2.72 1.02a9.45 9.45 0 0 1 4.96 0c1.89-1.28 2.72-1.02 2.72-1.02.55 1.36.2 2.37.1 2.62.63.69 1.01 1.58 1.01 2.66 0 3.81-2.32 4.64-4.53 4.89.41.35.79 1.05.79 2.12 0 1.53-.01 2.75-.01 3.12 0 .27.18.57.69.48C21.13 20.17 24 16.42 24 12c0-5.52-4.48-10-10-10z"/></svg>
              <span data-i18n="btn_github">GitHub</span>
            </div>
          </div>
        </div>
      </div>

      <!-- 右侧区域 -->
      <div class="glass-panel right-panel">
        <h3 data-i18n="lbl_local_env">Local Environment</h3>
        <div id="network-ip-info" class="ip-info-container"></div>
      </div>

    </div>
  </div>
  <script src="popup.js"></script>
</body>
</html>